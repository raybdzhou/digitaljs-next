!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("digitaljs",[],e):"object"==typeof exports?exports.digitaljs=e():t.digitaljs=e()}(this,(function(){return(()=>{"use strict";var t,e,i={15863:(t,e,i)=>{var o={};i.r(o),i.d(o,{Addition:()=>Ht,AdditionConst:()=>Se,AdditionConstView:()=>Pe,AdditionView:()=>Wt,And:()=>lt,AndReduce:()=>vt,AndReduceView:()=>St,AndView:()=>ct,Arith:()=>Ot,Arith11:()=>Mt,Arith21:()=>It,ArithConst:()=>ye,BaseCompare:()=>Tt,BaseCompareConst:()=>ke,BitExtend:()=>Je,BitExtendView:()=>Ke,Box:()=>P,BoxView:()=>N,BusGroup:()=>pi,BusGroupView:()=>li,BusRegroup:()=>ni,BusRegroupView:()=>ai,BusSlice:()=>si,BusSliceView:()=>ri,BusUngroup:()=>ci,BusUngroupView:()=>hi,Button:()=>M,ButtonView:()=>I,Clock:()=>W,ClockView:()=>X,Compare:()=>Et,CompareConst:()=>we,Constant:()=>F,ConstantView:()=>H,Dff:()=>vi,DffView:()=>Si,Display7:()=>Gi,Display7View:()=>Li,Division:()=>Qt,DivisionConst:()=>ze,DivisionConstView:()=>Ae,DivisionView:()=>Zt,Eq:()=>ge,EqCompare:()=>Dt,EqCompareConst:()=>ve,EqConst:()=>$e,EqConstView:()=>Ye,EqView:()=>me,FSM:()=>Ai,FSMView:()=>Oi,Gate:()=>k,Gate11:()=>tt,GateReduce:()=>it,GateSVG:()=>K,GateView:()=>w,GateX1:()=>et,Ge:()=>ue,GeConst:()=>Xe,GeConstView:()=>qe,GeView:()=>de,GenMux:()=>mi,GenMuxView:()=>_i,Gt:()=>ce,GtConst:()=>He,GtConstView:()=>We,GtView:()=>he,IO:()=>B,IOView:()=>z,Input:()=>A,InputView:()=>O,Lamp:()=>D,LampView:()=>j,Le:()=>pe,LeConst:()=>Ue,LeConstView:()=>Fe,LeView:()=>le,Lt:()=>ne,LtConst:()=>je,LtConstView:()=>Re,LtView:()=>ae,Memory:()=>Pi,MemoryView:()=>Ni,Modulo:()=>Jt,ModuloConst:()=>Oe,ModuloConstView:()=>Me,ModuloView:()=>Kt,Multiplication:()=>$t,MultiplicationConst:()=>Ve,MultiplicationConstView:()=>Be,MultiplicationView:()=>Yt,Mux:()=>fi,Mux1Hot:()=>yi,Mux1HotView:()=>xi,MuxSparse:()=>ki,MuxSparseView:()=>wi,MuxView:()=>bi,Nand:()=>dt,NandReduce:()=>Pt,NandReduceView:()=>Nt,NandView:()=>gt,Ne:()=>_e,NeConst:()=>Qe,NeConstView:()=>Ze,NeView:()=>fe,Negation:()=>jt,NegationView:()=>Rt,Nor:()=>ht,NorReduce:()=>kt,NorReduceView:()=>wt,NorView:()=>ut,Not:()=>rt,NotView:()=>nt,NumBase:()=>C,NumBaseView:()=>V,NumDisplay:()=>R,NumDisplayView:()=>U,NumEntry:()=>G,NumEntryView:()=>L,OpConst:()=>be,Or:()=>at,OrReduce:()=>yt,OrReduceView:()=>xt,OrView:()=>pt,Output:()=>T,OutputView:()=>E,Power:()=>te,PowerConst:()=>Ie,PowerConstView:()=>Ge,PowerView:()=>ee,Repeater:()=>ot,RepeaterView:()=>st,Shift:()=>Lt,ShiftConst:()=>xe,ShiftLeft:()=>ie,ShiftLeftConst:()=>Le,ShiftLeftConstView:()=>Te,ShiftLeftView:()=>oe,ShiftRight:()=>se,ShiftRightConst:()=>Ee,ShiftRightConstView:()=>De,ShiftRightView:()=>re,SignExtend:()=>ii,SignExtendView:()=>oi,Subcircuit:()=>di,SubcircuitView:()=>gi,Subtraction:()=>Xt,SubtractionConst:()=>Ne,SubtractionConstView:()=>Ce,SubtractionView:()=>qt,UnaryPlus:()=>Ut,UnaryPlusView:()=>Ft,Wire:()=>v,WireView:()=>S,Xnor:()=>ft,XnorReduce:()=>Bt,XnorReduceView:()=>zt,XnorView:()=>bt,Xor:()=>mt,XorReduce:()=>Ct,XorReduceView:()=>Vt,XorView:()=>_t,ZeroExtend:()=>ti,ZeroExtendView:()=>ei,portGroupAttrs:()=>x});var s=i(65649),r=i(5238),n=i(3051),a=i(66030),p=i(26528),l=i(14195),c=i(23679),h=i(96486),u=i(89082);const d={tagName:"circle",attributes:{r:7,fill:"black","fill-opacity":.3,stroke:"black","stroke-width":2,cursor:"move"}},g=s.sc.extend(h.merge({},d)),m=s.A_.extend(h.merge({},d)),_=s.zx.extend({update(){return this.relatedView.isShortWire()?(this.options.distance=this.options.distanceShort||this.options.distance,this.options.secondary&&this.hide()):this.options.distance=this.options.distanceLong||this.options.distance,s.zx.prototype.update.apply(this,arguments)}}),f=_.extend({name:"remove",children:s.JW.prototype.children,options:s.JW.prototype.options}),b=_.extend({name:"monitor",children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#001DFF",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"m -2.5,-0.5 a 2,2 0 1 0 4,0 2,2 0 1 0 -4,0 M 1,1 3,3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{action(t){this.notify("link:monitor")}}});var y=i(9983);const x={wire:{stroke:"#4B4F6A",x1:0,y1:0,x2:void 0,y2:0},port:{magnet:void 0,r:7,stroke:"black",fill:"white",strokeWidth:2,strokeOpacity:.5},bits:{ref:"port",fill:"black",fontSize:"7pt"},iolabel:{textVerticalAnchor:"middle",fill:"black",fontSize:"8pt"},decor:{stroke:"black",fill:"transparent"}},k=r.TV.define("Gate",{propagation:1,label:"",size:{width:80,height:30},inputSignals:{},outputSignals:{},attrs:{".":{magnet:!1},body:{stroke:"black",strokeWidth:2},text:{fontSize:"8pt",fill:"black"},label:{refX:.5,refDy:3,textAnchor:"middle"}},ports:{groups:{in:{position:"left",attrs:h.merge({},x,{wire:{x2:-25},port:{magnet:"passive",refX:-25},bits:{refDx:1,refY:-3,textAnchor:"start"},iolabel:{refX:5,textAnchor:"start"}})},out:{position:"right",attrs:h.merge({},x,{wire:{x2:25},port:{magnet:!0,refX:25},bits:{refX:-1,refY:-3,textAnchor:"end"},iolabel:{refX:-5,textAnchor:"end"}})}}},z:1},{operation:()=>({}),initialize(){const t=this.get("ports");t.items&&this._preprocessPorts(t.items),r.TV.prototype.initialize.apply(this,arguments),this.prepare(),this.bindAttrToProp("label/text","label"),this._unsupportedPropChanges.length>0&&this.on(this._unsupportedPropChanges.map((t=>"change:"+t)).join(" "),((t,e,i)=>{if(i.init)return;const o=h.intersection(Object.keys(this.changed),this._unsupportedPropChanges);o.forEach((t=>{this.set(t,this.previous(t),{init:!0})})),console.warn('Beta property change support: "'+o+'" changes on '+this.get("type")+" are (currently) not supported.")}))},prepare(){},bindAttrToProp(t,e){this.attr(t,this.get(e)),this.on("change:"+e,((e,i)=>this.attr(t,i)))},_changeOutputSignals(t){h.chain(this.graph.getConnectedLinks(this,{outbound:!0})).groupBy((t=>t.get("source").port)).forEach(((e,i)=>e.forEach((e=>e.set("signal",t[i]))))).value()},_setInput(t,e){const i=h.clone(this.get("inputSignals"));i[e]=t,this.set("inputSignals",i)},_clearInput(t){const e=this.getPort(t).bits;this._setInput(u.Vector3vl.xes(e),t)},_preprocessPorts(t){this._resetPortsSignals(t);for(const e of t){if(e.attrs={},e.attrs.bits={text:this._getBitsText(e.bits)},e.labelled){const t={text:"portlabel"in e?e.portlabel:e.id};!1===e.polarity&&(t["text-decoration"]="overline"),e.decor&&(console.assert("in"==e.group),t.refX=10),e.attrs.iolabel=t}e.decor&&(e.attrs.decor={d:e.decor})}},_setPortsBits(t){const e=h.cloneDeep(this.get("ports")),i=[];for(const o in t){const s=t[o],r=e.items.find((function(t){return t.id&&t.id===o}));r.bits=s,r.attrs.bits.text=this._getBitsText(s),i.push(r)}this._resetPortsSignals(i),this.set("ports",e),this.graph.getConnectedLinks(this,{outbound:!0}).filter((e=>e.get("source").port in t)).forEach((t=>t._changeSource(t.get("source")))),this.graph.getConnectedLinks(this,{inbound:!0}).filter((e=>e.get("target").port in t)).forEach((t=>t._changeTarget(t.get("target"))))},_getBitsText:t=>t>1?t:"",_resetPortValue:t=>u.Vector3vl.xes(t.bits),_resetPortsSignals(t){const e={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const i of t)console.assert(i.bits>=0),e[i.dir][i.id]=this._resetPortValue(i);this.set("inputSignals",e.in),this.set("outputSignals",e.out)},_removePortsSignals(t){const e={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const i of t)delete e[i.dir][i.id];this.set("inputSignals",e.in),this.set("outputSignals",e.out)},addPort(t){this.addPorts([t])},addPorts(t){this._preprocessPorts(t),r.TV.prototype.addPorts.apply(this,arguments)},removePort(t,e){this.removePorts([t])},removePorts(t,e){this._removePortsSignals(t),r.TV.prototype.removePorts.apply(this,arguments)},_getStackedPosition:t=>function(e,i){const o=t.side||"left",s=t.step||16,r=t.offset||12,n="left"==o?i.topLeft().x:"right"==o?i.topRight().x:void 0,a="top"==o?i.topLeft().y:"bottom"==o?i.bottomRight().y:void 0;return void 0!==n?h.map(e,(function(t,e){return e+=t.idxOffset||0,c.E({x:n,y:e*s+r})})):h.map(e,(function(t,e){return e+=t.idxOffset||0,c.E({x:e*s+r,y:a})}))},getLayoutSize(){return this.size()},setLayoutPosition(t){this.set("position",{x:t.x,y:t.y})},portMarkup:[{tagName:"line",className:"wire",selector:"wire"},{tagName:"circle",className:"port",selector:"port"},{tagName:"text",className:"bits",selector:"bits"},{tagName:"text",className:"iolabel",selector:"iolabel"},{tagName:"path",className:"decor",selector:"decor"}],markup:[{tagName:"text",className:"label",selector:"label"}],getGateParams(t){return h.cloneDeep(h.pick(this.attributes,this._gateParams.concat(t?this._gateLayoutParams:[])))},_gateParams:["label","type","propagation","source_positions"],_gateLayoutParams:["position"],_unsupportedPropChanges:[],_operationHelpers:[],_presentationParams:[]}),w=a.Z.extend({attrs:{signal:{high:{port:{stroke:"#fc7c68"}},low:{port:{stroke:"#03c03c"}},def:{port:{stroke:"#779ecb"}},undef:{port:{stroke:"#999"}}}},presentationAttributes:a.Z.addPresentationAttributes({inputSignals:"SIGNAL",outputSignals:"SIGNAL2"}),stopprop(t){t.stopPropagation()},confirmUpdate(t){this.hasFlag(t,"SIGNAL")&&this._updatePortSignals("in"),this.hasFlag(t,"SIGNAL2")&&this._updatePortSignals("out"),a.Z.prototype.confirmUpdate.apply(this,arguments)},_updatePortSignals(t){const e="in"===t?this.model.get("inputSignals"):"out"===t?this.model.get("outputSignals"):h.merge({},this.model.get("inputSignals"),this.model.get("outputSignals"));for(const t in e){const i=e[t],o=this.attrs.signal[i.isDefined?i.isHigh?"high":i.isLow?"low":"def":"undef"];this._applyPortAttrs(t,o)}},_applyAttrs(t){for(const e in t){const i=this.selectors[e];this.setNodeAttributes(i,t[e])}},_applyPortAttrs(t,e){if(t in this._portElementsCache)for(const i in e){const o=this._portElementsCache[t].portSelectors[i];this.setNodeAttributes(o,e[i])}},_updatePorts(){a.Z.prototype._updatePorts.apply(this,arguments),this._updatePortSignals()}}),v=n.rU.define("Wire",{attrs:{line:{class:"connection",targetMarker:null},wrapper:{stroke:"red"}},signal:u.Vector3vl.xes(1),bits:1,warning:!1,z:0},{initialize(){n.rU.prototype.initialize.apply(this,arguments),this.has("netname")&&this.label(0,{markup:[{tagName:"text",selector:"label"}],attrs:{label:{text:this.get("netname"),fill:"black",fontSize:"8pt"}},position:{distance:.5}})},onAdd(){this._changeSource(this.get("source")),this._was_added=!0},remove(){const t=this.get("target"),e=this.graph.getCell(t.id);e&&"port"in t&&e._clearInput(t.port),n.rU.prototype.remove.apply(this,arguments)},_propagateSignal(t,e){const i=this.getTargetElement();i&&(this.get("warning")?i._clearInput(t.port):i._setInput(e,t.port))},_changeSignal(t){this._propagateSignal(this.get("target"),t)},_changeSource(t){const e=this.getSourceElement();e&&"port"in t?(this.set("bits",e.getPort(t.port).bits),this._checkConnection(),this.set("signal",e.get("outputSignals")[t.port])):this.set("signal",u.Vector3vl.xes(this.get("bits")))},_changeTarget(t){if(this._checkConnection(),"port"in t&&this._propagateSignal(t,this.get("signal")),!this.hasChanged("target"))return;const e=this.previous("target"),i=this.graph.getCell(e.id);i&&"port"in e&&i._clearInput(e.port)},_checkConnection(){const t=this.get("target"),e=this.graph.getCell(t.id);this.set("warning",e&&e.getPort(t.port).bits!==this.get("bits")||!1,{silent:!this._was_added})},getWireParams(t){const e={from:{id:this.get("source").id,port:this.get("source").port},to:{id:this.get("target").id,port:this.get("target").port}};return this.has("netname")&&(e.name=this.get("netname")),t&&this.has("vertices")&&this.get("vertices").length>0&&(e.vertices=h.cloneDeep(this.get("vertices"))),e},getWirePath(){const t=[];for(let e=this.graph.get("subcircuit");null!=e;e=e.graph.get("subcircuit")){if(!e.has("label"))return null;t.push(e.get("label"))}return t.reverse()}}),S=p.t.extend({initFlag:p.t.prototype.initFlag.concat(["INIT"]),longWireLength:400,attrs:{signal:{high:{line:{stroke:"#fc7c68"}},low:{line:{stroke:"#03c03c"}},def:{line:{stroke:"#779ecb"}},undef:{line:{stroke:"#999"}}},bits:{bus:{line:{"stroke-width":"4px"}},single:{line:{"stroke-width":"2px"}}},warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}},_wireToolsView:"undefined"!=typeof window?new l.I({tools:[new s.UM({focusOpacity:.5}),new g,new m,new f({distanceShort:"75%",distanceLong:"50"}),new f({distance:"-50",secondary:!0}),new b({distanceShort:"25%",distanceLong:"30"}),new b({distance:"-30",secondary:!0})]}):null,presentationAttributes:p.t.addPresentationAttributes({signal:"SIGNAL",bits:"BITS",warning:"WARNING"}),initialize(){p.t.prototype.initialize.apply(this,arguments),this.prevModels={source:null,target:null}},confirmUpdate(t){p.t.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"SIGNAL")&&this._updateSignal(),this.hasFlag(t,"BITS")&&this._updateBits(),this.hasFlag(t,"WARNING")&&this._updateWarning()},isShortWire(){return this.getConnectionLength()<this.longWireLength},_updateSignal(){const t=this.model.get("signal"),e=this.attrs.signal[t.isDefined?t.isHigh?"high":t.isLow?"low":"def":"undef"];this._applyAttrs(e)},_updateBits(){const t=this.model.get("bits"),e=this.attrs.bits[t>1?"bus":"single"];this._applyAttrs(e)},_updateWarning(){const t=this.model.get("warning"),e=this.attrs.warning[t?"warn":"none"];this._applyAttrs(e)},_applyAttrs(t){for(const e in t){const i=this.selectors[e];this.setNodeAttributes(i,t[e])}},update(){p.t.prototype.update.apply(this,arguments),this._updateSignal(),this._updateBits(),this._updateWarning()},onRemove(){p.t.prototype.onRemove.apply(this,arguments),this._removeTooltip()},mouseenter(t){p.t.prototype.mouseenter.apply(this,arguments),this.addTools(this._wireToolsView),this._addTooltip({x:t.clientX+5,y:t.clientY+5})},mouseleave(t){p.t.prototype.mouseleave.apply(this,arguments),this.removeTools(),this._removeTooltip()},_addTooltip(t){1!=this.model.get("bits")&&(this.wire_hover||(this.wire_hover=y('<div class="wire_hover">').css("left",t.x).css("top",t.y).appendTo(y(document.body)),this._generateTextForTooltip(),this.listenTo(this.model,"change:signal",this._generateTextForTooltip)))},_removeTooltip(){this.wire_hover&&(this.wire_hover.remove(),this.wire_hover=null,this.stopListening(this.model,"change:signal",this._generateTextForTooltip))},_generateTextForTooltip(){if(!this.wire_hover)return;const t=this.model.get("signal"),e=this.model.graph._display3vl,i=["Hex: "+e.show("hex",t)+"<br>","Dec: "+e.show("dec",t)+"<br>","Oct: "+e.show("oct",t)+"<br>","Bin: "+e.show("bin",t)].join("");this.wire_hover.html(i)},onEndModelChange(t,e,i){"object"==typeof e&&null!=e&&e==this.prevModels[t]&&Object.keys(e.changed).length>0&&!("position"in e.changed)||(p.t.prototype.onEndModelChange.apply(this,arguments),this.prevModels[t]=e)}}),P=k.define("Box",{attrs:{body:{refWidth:1,refHeight:1},tooltip:{refX:0,refY:-30,height:30}}},{initialize(){k.prototype.initialize.apply(this,arguments),this.on("change:size",((t,e)=>{e.width>this.tooltipMinWidth?this.attr("tooltip",{refWidth:1,width:null}):this.attr("tooltip",{refWidth:null,width:this.tooltipMinWidth})})),this.trigger("change:size",this,this.prop("size"))},markup:k.prototype.markup.concat([{tagName:"rect",className:"body",selector:"body"}]),markupZoom:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"a",className:"zoom",textContent:"ðŸ”",style:{cursor:"pointer"}}]}]}],tooltipMinWidth:20,decorClock:"M"+[[0,-6],[6,0],[0,6]].map((t=>t.join(" "))).join(" L")}),N=w.extend({_autoResizeBox:!1,render(){w.prototype.render.apply(this,arguments),this._autoResizeBox&&!this.model.get("box_resized")&&(this.model.set("box_resized",!0),this.model.prop("size/width",this._calculateBoxWidth()))},_calculateBoxWidth(){const t=Array.from(this.el.querySelectorAll("[port-group=in] > text.iolabel")),e=Array.from(this.el.querySelectorAll("[port-group=out] > text.iolabel")),i=Math.max(...t.map((t=>t.getBBox().width))),o=Math.max(...e.map((t=>t.getBBox().width))),s=t=>t==-1/0?-5:t;return s(i)+s(o)+25}}),C=P.define("NumBase",{numbase:"hex",bits:1},{initialize(){P.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this.graph._display3vl.usableDisplays(this.numbaseType,this.get("bits")).includes(this.get("numbase"))||this.set("numbase","hex")}))},tooltipMinWidth:70,markupTooltip:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"select",className:"numbase"}]}]}],_gateParams:P.prototype._gateParams.concat(["numbase"])}),V=N.extend({presentationAttributes:N.addPresentationAttributes({bits:"BITS",numbase:"NUMBASE"}),_autoResizeBox:!0,events:{"click select.numbase":"stopprop","mousedown select.numbase":"stopprop","touchstart select.numbase":"stopprop","change select.numbase":"_changeNumbase"},_changeNumbase(t){this.model.set("numbase",t.target.value||"bin")},_calculateBoxWidth(){const t=document.createElementNS("http://www.w3.org/2000/svg","text");y(t).text(Array(this.model.get("bits")).fill("0").join("")).attr("class","numvalue").appendTo(this.$el);const e=t.getBBox().width+20;return t.remove(),e},confirmUpdate(t){N.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"BITS")||this.hasFlag(t,"RENDER"))&&this._makeNumBaseSelector(),this.hasFlag(t,"NUMBASE")&&this._updateNumBaseSelector()},_makeNumBaseSelector(){this.$("select.numbase").empty();const t=this.model.get("numbase"),e=this.model.graph._display3vl;for(const i of e.usableDisplays(this.model.numbaseType,this.model.get("bits")))y("<option>").attr("value",i).prop("selected",i==t).text(i).appendTo(this.$("select.numbase"))},_updateNumBaseSelector(){this.$("select.numbase").val(this.model.get("numbase"))}}),B=C.define("IO",{bits:1,net:"",propagation:0,mode:-1,attrs:{ioname:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontWeight:"bold",fontSize:"10pt"}}},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:this._portDirection,group:this._portDirection,dir:this._portDirection,bits:t}],C.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{const i={};i[this._portDirection]=e,this._setPortsBits(i),0!=this.get("mode")&&this._checkMode()})),this.bindAttrToProp("text.ioname/text","net")},onAdd(){this._checkMode()},_checkMode(){const t=this.graph&&this.graph.has("subcircuit"),e=this.get("bits"),i=t?0:1==e?1:2;return this.set("mode",i),this.set("box_resized",!1),this.set("markup",0==i?this.markupInSubcircuit:1==i?this.markupSingle:this.markupBus),i},_setPortsBits(t){if(C.prototype._setPortsBits.apply(this,arguments),0!=this.get("mode"))return;const e=this.graph.get("subcircuit");console.assert(null!=e);const i={};i[this.get("net")]=t[this._portDirection],e._setPortsBits(i)},markupSingle:C.prototype.markup,markupBus:C.prototype.markup.concat(C.prototype.markupTooltip),markupInSubcircuit:C.prototype.markup.concat([{tagName:"text",className:"ioname",selector:"ioname"}]),_gateParams:C.prototype._gateParams.concat(["bits","net","order"])}),z=V.extend({_calculateBoxWidth(){switch(this.model.get("mode")){case 0:const t=this.selectors.ioname;return"none"!==t.getAttribute("display")?t.getBBox().width+10:20;case 1:return 30;case 2:return V.prototype._calculateBoxWidth.call(this)}}}),A=B.define("Input",{attrs:{btnface:{stroke:"black",strokeWidth:2,refX:.2,refY:.2,refHeight:.6,refWidth:.6,cursor:"pointer"},"foreignObject.valinput":{refX:.5,refY:.5,refWidth:-10,refHeight:-10,xAlignment:"middle",yAlignment:"middle"}}},{isInput:!0,_portDirection:"out",_resetPortValue(t){if("out"==t.id&&"out"==t.dir){const t=this.get("bits");return 1==this.get("mode")?u.Vector3vl.zeros(t):u.Vector3vl.xes(t)}return B.prototype._resetPortValue.call(this,t)},_checkMode(){B.prototype._checkMode.call(this),this._resetPortsSignals([this.get("ports").items[0]])},setInput(t){this._setInput(t),this.trigger("userChange",this)},toggleInput(){this.setInput(this.get("outputSignals").out.not())},_setInput(t){if(t.bits!=this.get("bits"))throw new Error("setInput: wrong number of bits");this.set("outputSignals",{out:t})},markupSingle:B.prototype.markupSingle.concat([{tagName:"rect",className:"btnface",selector:"btnface"}]),markupBus:B.prototype.markupBus.concat([{tagName:"foreignObject",className:"valinput",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"text"}}]}]}]),numbaseType:"read"}),O=z.extend({attrs:h.merge({button:{high:{btnface:{fill:"black"}},low:{btnface:{fill:"white"}}}},z.prototype.attrs),confirmUpdate(t){z.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"SIGNAL2")||this.hasFlag(t,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateButton();break;case 2:this._updateNumEntry()}},_updateButton(){const t=this.model.get("outputSignals").out,e=this.attrs.button[t.isHigh?"high":"low"];this._applyAttrs(e)},_updateNumEntry(){const t=this.model.graph._display3vl;this.$("input").val(t.show(this.model.get("numbase"),this.model.get("outputSignals").out)),this.$("input").removeClass("invalid")},render(){z.prototype.render.apply(this,arguments),this._updateView()},events:h.merge({"click .btnface":"_onButton","mousedown .btnface":"stopprop","touchstart .btnface":"stopprop","click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_onNumEntry"},V.prototype.events),_onButton(){this.model.toggleInput()},_onNumEntry(t){const e=this.model.get("numbase"),i=this.model.get("bits"),o=this.model.graph._display3vl;if(o.validate(e,t.target.value,i)){const s=o.read(e,t.target.value,i);this.model.setInput(s)}else this.$("input").addClass("invalid")}}),M=A,I=O,G=A,L=O,T=B.define("Output",{attrs:{led:{refX:.5,refY:.5,refR:.35},value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{isOutput:!0,_portDirection:"in",getOutput(){return this.get("inputSignals").in},markupSingle:B.prototype.markupSingle.concat([{tagName:"circle",className:"led",selector:"led"}]),markupBus:B.prototype.markupBus.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),numbaseType:"show"}),E=z.extend({attrs:h.merge({lamp:{high:{led:{fill:"#fc7c68"}},low:{led:{fill:"#03c03c"}},undef:{led:{fill:"#bfc5c6"}}}},z.prototype.attrs),confirmUpdate(t){z.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"SIGNAL")||this.hasFlag(t,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateLamp();break;case 2:this._updateNumDisplay()}},_updateLamp(){const t=this.model.get("inputSignals").in,e=this.attrs.lamp[t.isHigh?"high":t.isLow?"low":"undef"];this._applyAttrs(e)},_updateNumDisplay(){const t=this.model.graph._display3vl;this.$("text.value tspan").text(t.show(this.model.get("numbase"),this.model.get("inputSignals").in))},render(){z.prototype.render.apply(this,arguments),this._updateView()}}),D=T,j=E,R=T,U=E,F=C.define("Constant",{constant:"0",propagation:0,attrs:{value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{initialize(){const t=this.get("constant").length;this.set("bits",t),this.get("ports").items=[{id:"out",group:"out",dir:"out",bits:t}],C.prototype.initialize.apply(this,arguments),this.on("change:constant",((t,e)=>{const i=e.length;this._setPortsBits({out:i}),this.set("bits",i),this.set("constantCache",u.Vector3vl.fromBin(e,i))}))},prepare(){const t=this.get("constant"),e=t.length;this.set("constantCache",u.Vector3vl.fromBin(t,e))},operation(){return{out:this.get("constantCache")}},markup:C.prototype.markup.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),_gateParams:C.prototype._gateParams.concat(["constant"]),numbaseType:"show"}),H=V.extend({presentationAttributes:V.addPresentationAttributes({constantCache:"CONSTANT"}),confirmUpdate(t){V.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"CONSTANT")||this.hasFlag(t,"NUMBASE"))&&this._showText()},_showText(){const t=this.model.graph._display3vl;this.$("text.value tspan").text(t.show(this.model.get("numbase"),this.model.get("constantCache")))},update(){V.prototype.update.apply(this,arguments),this._showText()}}),W=P.define("Clock",{propagation:100,ports:{items:[{id:"out",group:"out",dir:"out",bits:1}]},size:{width:30,height:30}},{_resetPortValue:t=>"out"==t.id&&"out"==t.dir?u.Vector3vl.zero:P.prototype._resetPortValue(t),operation(){return{out:this.get("outputSignals").out.not(),_clock_hack:!0}},tooltipMinWidth:55,markup:P.prototype.markup.concat([{tagName:"path",className:"decor",attributes:{d:"M7.5 7.5 L7.5 22.5 L15 22.5 L15 7.5 L22.5 7.5 L22.5 22.5",stroke:"black"}},{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"number",min:1,step:1}}]}]}]),_unsupportedPropChanges:P.prototype._unsupportedPropChanges.concat(["bits"])}),X=N.extend({presentationAttributes:N.addPresentationAttributes({propagation:"SIGNAL"}),events:{"click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_changePropagation","input input":"_changePropagation"},render(t){N.prototype.render.apply(this,arguments),this.updatePropagation()},confirmUpdate(t){N.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"SIGNAL")&&this.updatePropagation()},_changePropagation(t){const e=t.target.value,i=String(e)==String(Number(e));i&&this.model.set("propagation",Number(e)||1),this.$("input").toggleClass("invalid",!i)},updatePropagation(){this.$("input").val(this.model.get("propagation"))}}),q="M19 0v32h16c9 0 16-7 16-16S44 0 35 0H20z",$="M14.3 0l1.6 2s4.5 5.6 4.5 14s-4.5 14-4.5 14l-1.6 2H28c3.8 0 16.6-.5 25-16h0A28 28 0 0028 0H16.8z",Y="M18-2v36l2-1 32-17h0L20-1z",Q={tagName:"path",selector:"xor_arc",attributes:{fill:"#000",d:"M6.8-1.2 10 2.7S14.2 8 14.2 16S10 29.3 10 29.3l-3.2 3.9H10l1.7-2.4s4.8-6 4.8-14.8c0-8.9-4.8-14.8-4.8-14.8l-1.7-2.4z"}},Z={tagName:"circle",className:"body",selector:"neg_bubble",attributes:{stroke:"#000","stroke-width":"2px",cx:56,cy:16,r:4}};function J(t=[]){return{tagName:"g",selector:"body",children:[{tagName:"path",className:"body gate",selector:"gate"}].concat(t)}}const K=k.define("GateSVG",{bits:1,size:{width:60,height:32},ports:{groups:{in:{position:{name:"left",args:{dx:30}},attrs:{wire:{x2:-50},port:{refX:-50}},z:-1},out:{position:{name:"right",args:{dx:-30}},attrs:{wire:{x2:50},port:{refX:50}},z:-1}}}},{markup:k.prototype.markup.concat([J()]),_gateParams:k.prototype._gateParams.concat(["bits"])}),tt=K.define("Gate11",{},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t},{id:"out",group:"out",dir:"out",bits:t}],K.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits({in:e,out:e})}))}}),et=K.define("GateX1",{inputs:2,attrs:{gate:{"vector-effect":"non-scaling-stroke"},xor_arc:{"vector-effect":"non-scaling-stroke"},neg_bubble:{"vector-effect":"non-scaling-stroke"}}},{initialize(){const t=this.get("bits"),e=this.get("inputs"),i=[];for(let o=1;o<=e;o++)i.push({id:"in"+o,group:"in",dir:"in",bits:t});i.push({id:"out",group:"out",dir:"out",bits:t}),this.get("ports").items=i;const o=e/2;this.set("size",{width:60*o,height:32*o}),this.attr("body/transform","translate(-4, 0) scale("+o+")"),this.prop("ports/groups/in/position/args/dx",30*o),this.prop("ports/groups/in/attrs/wire/x2",-30*o-20),this.prop("ports/groups/in/attrs/port/refX",-30*o-20),this.prop("ports/groups/out/position/args/dx",-30*o),this.prop("ports/groups/out/attrs/wire/x2",30*o+20),this.prop("ports/groups/out/attrs/port/refX",30*o+20),K.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{const i=this.get("inputs"),o={out:e};for(let t=1;t<=i;t++)o["in"+t]=e;this._setPortsBits(o)}))},operation(t){let e=t.in1;for(let i=2;i<=this.get("inputs");i++)e=this.binoperation(e,t["in"+i]);return{out:this.finoperation(e)}},finoperation:t=>t,_gateParams:K.prototype._gateParams.concat(["inputs"]),_unsupportedPropChanges:K.prototype._unsupportedPropChanges.concat(["inputs"]),_operationHelpers:K.prototype._operationHelpers.concat(["binoperation","finoperation"])}),it=K.define("GateReduce",{},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t},{id:"out",group:"out",dir:"out",bits:1}],K.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits({in:e})}))}}),ot=tt.define("Repeater",{attrs:{gate:{d:Y}}},{operation:t=>({out:t.in})}),st=w,rt=tt.define("Not",{attrs:{gate:{d:Y}}},{operation:t=>({out:t.in.not()}),markup:k.prototype.markup.concat([J([Z])])}),nt=w,at=et.define("Or",{attrs:{gate:{d:$}}},{binoperation:(t,e)=>t.or(e)}),pt=w,lt=et.define("And",{attrs:{gate:{d:q}}},{binoperation:(t,e)=>t.and(e)}),ct=w,ht=et.define("Nor",{attrs:{gate:{d:$}}},{binoperation:(t,e)=>t.or(e),finoperation:t=>t.not(),markup:k.prototype.markup.concat([J([Z])])}),ut=w,dt=et.define("Nand",{attrs:{gate:{d:q}}},{binoperation:(t,e)=>t.and(e),finoperation:t=>t.not(),markup:k.prototype.markup.concat([J([Z])])}),gt=w,mt=et.define("Xor",{attrs:{gate:{d:$}}},{binoperation:(t,e)=>t.xor(e),markup:k.prototype.markup.concat([J([Q])])}),_t=w,ft=et.define("Xnor",{attrs:{gate:{d:$}}},{binoperation:(t,e)=>t.xor(e),finoperation:t=>t.not(),markup:k.prototype.markup.concat([J([Q,Z])])}),bt=w,yt=it.define("OrReduce",{attrs:{gate:{d:$}}},{operation:t=>({out:t.in.reduceOr()})}),xt=w,kt=it.define("NorReduce",{attrs:{gate:{d:$}}},{operation:t=>({out:t.in.reduceNor()}),markup:it.prototype.markup.concat([Z])}),wt=w,vt=it.define("AndReduce",{attrs:{gate:{d:q}}},{operation:t=>({out:t.in.reduceAnd()})}),St=w,Pt=it.define("NandReduce",{attrs:{gate:{d:q}}},{operation:t=>({out:t.in.reduceNand()}),markup:k.prototype.markup.concat([J([Z])])}),Nt=w,Ct=it.define("XorReduce",{attrs:{gate:{d:$}}},{operation:t=>({out:t.in.reduceXor()}),markup:k.prototype.markup.concat([J([Q])])}),Vt=w,Bt=it.define("XnorReduce",{attrs:{gate:{d:$}}},{operation:t=>({out:t.in.reduceXnor()}),markup:k.prototype.markup.concat([J([Q,Z])])}),zt=w;function At(t){return t<=Number.MAX_SAFE_INTEGER&&t>=-Number.MAX_SAFE_INTEGER}const Ot=k.define("Arith",{size:{width:40,height:40},attrs:{body:{refR:.5,refCx:.5,refCy:.5},oper:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontSize:"12pt"}},ports:{groups:{in:{position:{name:"left",args:{dx:10}},attrs:{wire:{x2:-35},port:{refX:-35}},z:-1},out:{position:{name:"right",args:{dx:-10}},attrs:{wire:{x2:35},port:{refX:35}},z:-1}}}},{markup:k.prototype.markup.concat([{tagName:"circle",className:"body",selector:"body"},{tagName:"text",className:"oper",selector:"oper"}]),_gateParams:k.prototype._gateParams.concat(["bits","signed"]),_unsupportedPropChanges:k.prototype._unsupportedPropChanges.concat(["signed"])}),Mt=Ot.define("Arith11",{bits:{in:1,out:1},signed:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:t.out}],Ot.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits(e)}))},operation(t){const e=this.get("bits");return t.in.isFullyDefined?{out:u.Vector3vl.fromNumber(this.arithop(t.in.toBigInt(this.get("signed"))),e.out)}:{out:u.Vector3vl.xes(e.out)}},_operationHelpers:Ot.prototype._operationHelpers.concat(["arithop"])}),It=Ot.define("Arith21",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1}},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:t.in1},{id:"in2",group:"in",dir:"in",bits:t.in2},{id:"out",group:"out",dir:"out",bits:t.out}],Ot.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits(e)}))},operation(t){const e=this.get("bits"),i=this.get("signed");return t.in1.isFullyDefined&&t.in2.isFullyDefined?{out:u.Vector3vl.fromNumber(this.arithop(t.in1.toBigInt(i.in1&&i.in2),t.in2.toBigInt(i.in1&&i.in2)),e.out)}:{out:u.Vector3vl.xes(e.out)}},_operationHelpers:Ot.prototype._operationHelpers.concat(["arithop"])});function Gt(t,e,i,o,s,r,n){const a=t.get(t.bits-1),p=u.Vector3vl.make(Math.max(0,o-i),n?0:s?a:-1),l=t.concat(p);return(e<0?u.Vector3vl.make(-e,n?0:-1).concat(l):l.slice(e).concat(u.Vector3vl.make(e,n?0:r?l.get(l.bits-1):-1))).slice(0,o)}const Lt=Ot.define("Shift",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1,out:!1},fillx:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:t.in1},{id:"in2",group:"in",dir:"in",bits:t.in2},{id:"out",group:"out",dir:"out",bits:t.out}],Ot.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits(e)}))},operation(t){const e=this.get("bits"),i=this.get("signed"),o=this.get("fillx");if(!t.in2.isFullyDefined)return{out:u.Vector3vl.xes(e.out)};const s=t.in2.toNumber(i.in2)*this.shiftdir;return{out:Gt(t.in1,s,e.in1,e.out,i.in1,i.out,o)}},_gateParams:Ot.prototype._gateParams.concat(["fillx"]),_unsupportedPropChanges:Ot.prototype._unsupportedPropChanges.concat(["fillx"]),_operationHelpers:Ot.prototype._operationHelpers.concat(["shiftdir"])}),Tt=Ot.define("BaseCompare",{bits:{in1:1,in2:1},signed:{in1:!1,in2:!1}},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:t.in1},{id:"in2",group:"in",dir:"in",bits:t.in2},{id:"out",group:"out",dir:"out",bits:1}],Ot.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits(e)}))}}),Et=Tt.define("Compare",{},{operation(t){this.get("bits");const e=this.get("signed");return t.in1.isFullyDefined&&t.in2.isFullyDefined?{out:u.Vector3vl.fromBool(this.arithcomp(t.in1.toBigInt(e.in1&&e.in2),t.in2.toBigInt(e.in1&&e.in2)))}:{out:u.Vector3vl.xes(1)}},_operationHelpers:Tt.prototype._operationHelpers.concat(["arithcomp"])}),Dt=Tt.define("EqCompare",{},{operation(t){const e=this.get("bits"),i=this.get("signed"),o=e.in1>=e.in2?t.in1:t.in1.concat(u.Vector3vl.make(e.in2-e.in1,i.in1&&i.in2?t.in1.msb:-1)),s=e.in2>=e.in1?t.in2:t.in2.concat(u.Vector3vl.make(e.in1-e.in2,i.in1&&i.in2?t.in2.msb:-1));return{out:this.bincomp(o,s)}},_operationHelpers:Tt.prototype._operationHelpers.concat(["bincomp"])}),jt=Mt.define("Negation",{attrs:{oper:{text:"-"}}},{arithop:t=>-t}),Rt=w,Ut=Mt.define("UnaryPlus",{attrs:{oper:{text:"+"}}},{arithop:t=>t}),Ft=w,Ht=It.define("Addition",{attrs:{oper:{text:"+"}}},{arithop:(t,e)=>t+e}),Wt=w,Xt=It.define("Subtraction",{attrs:{oper:{text:"-"}}},{arithop:(t,e)=>t-e}),qt=w,$t=It.define("Multiplication",{attrs:{oper:{text:"Ã—"}}},{arithop:(t,e)=>t*e}),Yt=w,Qt=It.define("Division",{attrs:{oper:{text:"Ã·"}}},{arithop:(t,e)=>0n==e?t:t/e}),Zt=w,Jt=It.define("Modulo",{attrs:{oper:{text:"%"}}},{arithop:(t,e)=>0n==e?t:t%e}),Kt=w,te=It.define("Power",{attrs:{oper:{text:"^"}}},{arithop:(t,e)=>e>=0n?t**e:1n==t?1n:-1n==t?e%2n?-1n:1n:0n}),ee=w,ie=Lt.define("ShiftLeft",{attrs:{oper:{text:"â‰ª"}}},{shiftdir:-1}),oe=w,se=Lt.define("ShiftRight",{attrs:{oper:{text:"â‰«"}}},{shiftdir:1}),re=w,ne=Et.define("Lt",{attrs:{oper:{text:"<"}}},{arithcomp:(t,e)=>t<e}),ae=w,pe=Et.define("Le",{attrs:{oper:{text:"â‰¤"}}},{arithcomp:(t,e)=>t<=e}),le=w,ce=Et.define("Gt",{attrs:{oper:{text:">"}}},{arithcomp:(t,e)=>t>e}),he=w,ue=Et.define("Ge",{attrs:{oper:{text:"â‰¥"}}},{arithcomp:(t,e)=>t>=e}),de=w,ge=Dt.define("Eq",{attrs:{oper:{text:"="}}},{bincomp:(t,e)=>t.xnor(e).reduceAnd()}),me=w,_e=Dt.define("Ne",{attrs:{oper:{text:"â‰ "}}},{bincomp:(t,e)=>t.xor(e).reduceOr()}),fe=w,be=Ot.define("OpConst",{leftOp:!1,constant:0},{initialize(){Ot.prototype.initialize.apply(this,arguments);let t=this.get("constant");("string"==typeof t||t instanceof String)&&(t=BigInt(t),At(t)&&(t=Number(t)),this.set("constant",t));const e=()=>{const t=30+10*String(this.get("constant")).length;this.prop("size",{width:t,height:t}),this.attr("oper/text",this.get("leftOp")?this.get("constant")+this.operSymbol:this.operSymbol+this.get("constant"))};e(),this.on("change:bits",((t,e)=>{this._setPortsBits(e)})),this.on("change:constant",(()=>e())),this.on("change:leftOp",(()=>e()))},getGateParams(){const t=Ot.prototype.getGateParams.apply(this,arguments);return"bigint"==typeof t.constant&&(At(t.constant)?t.constant=Number(t.constant):t.constant=String(t.constant)),t},_gateParams:Ot.prototype._gateParams.concat(["leftOp","constant"])}),ye=be.define("ArithConst",{bits:{in:1,out:1},signed:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:t.out}],be.prototype.initialize.apply(this,arguments)},operation(t){const e=this.get("bits"),i=this.get("signed"),o=this.get("constant");return t.in.isFullyDefined?this.get("leftOp")?{out:u.Vector3vl.fromNumber(this.arithop(BigInt(o),t.in.toBigInt(i.in)),e.out)}:{out:u.Vector3vl.fromNumber(this.arithop(t.in.toBigInt(i.in),BigInt(o)),e.out)}:{out:u.Vector3vl.xes(e.out)}},_operationHelpers:be.prototype._operationHelpers.concat(["arithop"])}),xe=be.define("ShiftConst",{bits:{in:1,out:1},signed:{in:!1,out:!1},fillx:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:t.out}],be.prototype.initialize.apply(this,arguments)},operation(t){const e=this.get("bits"),i=this.get("signed"),o=this.get("fillx"),s=this.get("constant");if(this.get("leftOp")){if(!t.in.isFullyDefined)return{out:u.Vector3vl.xes(e.out)};const r=t.in.toNumber(i.in),n=u.Vector3vl.fromNumber(s);return{out:Gt(n,r*this.shiftdir,n.bits,e.out,s<0,i.out,o)}}return console.assert(At(s)),{out:Gt(t.in,Number(s)*this.shiftdir,e.in,e.out,i.in,i.out,o)}},_gateParams:be.prototype._gateParams.concat(["fillx"]),_operationHelpers:be.prototype._operationHelpers.concat(["shiftdir"])}),ke=be.define("BaseCompareConst",{bits:{in:1},signed:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:1}],be.prototype.initialize.apply(this,arguments)}}),we=ke.define("CompareConst",{},{operation(t){this.get("bits");const e=this.get("signed"),i=this.get("constant");return t.in.isFullyDefined?this.get("leftOp")?{out:u.Vector3vl.fromBool(this.arithcomp(BigInt(i),t.in.toBigInt(e.in)))}:{out:u.Vector3vl.fromBool(this.arithcomp(t.in.toBigInt(e.in),BigInt(i)))}:{out:u.Vector3vl.x}},_operationHelpers:ke.prototype._operationHelpers.concat(["arithcomp"])}),ve=ke.define("EqCompareConst",{},{operation(t){const e=this.get("bits"),i=(this.get("signed"),this.get("constant"));return this.get("leftOp")?{out:this.bincomp(u.Vector3vl.fromNumber(i,e.in),t.in)}:{out:this.bincomp(t.in,u.Vector3vl.fromNumber(i,e.in))}},_operationHelpers:ke.prototype._operationHelpers.concat(["bincomp"])}),Se=ye.define("AdditionConst",{},{operSymbol:"+",arithop:(t,e)=>t+e}),Pe=w,Ne=ye.define("SubtractionConst",{},{operSymbol:"-",arithop:(t,e)=>t-e}),Ce=w,Ve=ye.define("MultiplicationConst",{},{operSymbol:"Ã—",arithop:(t,e)=>t*e}),Be=w,ze=ye.define("DivisionConst",{},{operSymbol:"Ã·",arithop:(t,e)=>0n==e?t:t/e}),Ae=w,Oe=ye.define("ModuloConst",{},{operSymbol:"%",arithop:(t,e)=>0n==e?t:t%e}),Me=w,Ie=ye.define("PowerConst",{},{operSymbol:"^",arithop:(t,e)=>e>=0n?t**e:1n==t?1n:-1n==t?e%2n?-1n:1n:0n}),Ge=w,Le=xe.define("ShiftLeftConst",{},{operSymbol:"â‰ª",shiftdir:-1}),Te=w,Ee=xe.define("ShiftRightConst",{},{operSymbol:"â‰«",shiftdir:1}),De=w,je=we.define("LtConst",{},{operSymbol:"<",arithcomp:(t,e)=>t<e}),Re=w,Ue=we.define("LeConst",{},{operSymbol:"â‰¤",arithcomp:(t,e)=>t<=e}),Fe=w,He=we.define("GtConst",{},{operSymbol:">",arithcomp:(t,e)=>t>e}),We=w,Xe=we.define("GeConst",{},{operSymbol:"â‰¥",arithcomp:(t,e)=>t>=e}),qe=w,$e=ve.define("EqConst",{},{operSymbol:"=",bincomp:(t,e)=>t.xnor(e).reduceAnd()}),Ye=w,Qe=ve.define("NeConst",{},{operSymbol:"â‰ ",bincomp:(t,e)=>t.xor(e).reduceOr()}),Ze=w,Je=P.define("BitExtend",{extend:{input:1,output:1},propagation:0,attrs:{value:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){const t=this.get("extend");console.assert(t.input<=t.output),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.input},{id:"out",group:"out",dir:"out",bits:t.output}],P.prototype.initialize.apply(this,arguments),this.on("change:extend",((t,e)=>{this._setPortsBits({in:e.input,out:e.output})}))},operation(t){const e=this.get("extend");return{out:t.in.concat(u.Vector3vl.make(e.output-e.input,this._extBit(t.in)))}},markup:P.prototype.markup.concat([{tagName:"text",className:"value",selector:"value"}]),_gateParams:P.prototype._gateParams.concat(["extend"]),_operationHelpers:P.prototype._operationHelpers.concat(["_extBit"])}),Ke=N.extend({_autoResizeBox:!0,_calculateBoxWidth(){return this.el.querySelector("text.value").getBBox().width+10}}),ti=Je.define("ZeroExtend",{attrs:{value:{text:"zero-extend"}}},{_extBit:t=>-1}),ei=Ke,ii=Je.define("SignExtend",{attrs:{value:{text:"sign-extend"}}},{_extBit:t=>t.get(t.bits-1)}),oi=Ke,si=P.define("BusSlice",{slice:{first:0,count:1,total:2},propagation:0,size:{width:40,height:24}},{initialize(){const t=this.get("slice"),e=1==t.count?t.first:t.first+"-"+(t.first+t.count-1);this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.total},{id:"out",group:"out",dir:"out",bits:t.count,portlabel:e,labelled:!0}],P.prototype.initialize.apply(this,arguments),this.on("change:slice",((t,e)=>{this._setPortsBits({in:e.total,out:e.count})}))},operation(t){const e=this.get("slice");return{out:t.in.slice(e.first,e.first+e.count)}},_gateParams:P.prototype._gateParams.concat(["slice"])}),ri=N.extend({_autoResizeBox:!0}),ni=P.define("BusRegroup",{groups:[1],propagation:0,size:{width:40,height:void 0}},{initialize(){var t=0;const e=[],i=this.get("groups");this.get("size").height=16*i.length+8;for(const[o,s]of i.entries()){const i=t+(s>1?"-"+(t+s-1):"");t+=s,e.push({id:this.group_dir+o,group:this.group_dir,dir:this.group_dir,bits:s,portlabel:i,labelled:!0})}this.set("bits",t);const o="out"==this.group_dir?"in":"out";e.push({id:o,group:o,dir:o,bits:t}),this.get("ports").items=e,P.prototype.initialize.apply(this,arguments)},_gateParams:P.prototype._gateParams.concat(["groups"]),_unsupportedPropChanges:P.prototype._unsupportedPropChanges.concat(["groups"])}),ai=N.extend({_autoResizeBox:!0}),pi=ni.define("BusGroup",{},{group_dir:"in",operation(t){const e=[];for(const i of this.get("groups").keys())e.push(t["in"+i]);return{out:u.Vector3vl.concat(...e)}}}),li=ai,ci=ni.define("BusUngroup",{},{group_dir:"out",operation(t){const e={};let i=0;for(const[o,s]of this.get("groups").entries())e["out"+o]=t.in.slice(i,i+s),i+=s;return e}}),hi=ai;var ui=i(43812);const di=P.define("Subcircuit",{propagation:0,warning:!1,attrs:{wrapper:{refWidth:1,refHeight:1,stroke:"red",strokeWidth:10},type:{refX:.5,refY:-10,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){this.bindAttrToProp("text.type/text","celltype");const t=this.get("graph");console.assert(t instanceof ui.k),t.set("subcircuit",this);const e=t.getCells().filter((t=>t instanceof B)),i=e.filter((t=>t instanceof A)),o=e.filter((t=>t instanceof T));function s(t,e){return t.has("order")||e.has("order")?t.get("order")-e.get("order"):t.get("net").localeCompare(e.get("net"))}i.sort(s),o.sort(s);const r={width:80,height:16*Math.max(i.length,o.length)+8},n=[],a={};for(const[t,e]of i.entries())n.push({id:e.get("net"),group:"in",dir:"in",bits:e.get("bits"),labelled:!0});for(const[t,e]of o.entries())n.push({id:e.get("net"),group:"out",dir:"out",bits:e.get("bits"),labelled:!0});for(const t of e)a[t.get("net")]=t.get("id");this.set("size",r),this.set("circuitIOmap",a),this.get("ports").items=n,this.set("warning",t._warnings>0),P.prototype.initialize.apply(this,arguments)},_resetPortValue(t){const e=this.get("circuitIOmap"),i=this.get("graph");return"in"==t.dir?i.getCell(e[t.id]).get("outputSignals").out:"out"==t.dir?i.getCell(e[t.id]).get("inputSignals").in:P.prototype._resetPortValue.call(this,t)},getLayoutSize(){const t=this.size();return t.height+=10,t},setLayoutPosition(t){this.set("position",{x:t.x,y:t.y+10})},getPortsPositions(){const t=P.prototype.getPortsPositions.apply(this,arguments),e={};for(const i in t)e[i]={...t[i]},e[i].y=e[i].y+10;return e},markup:[{tagName:"rect",selector:"wrapper"}].concat(P.prototype.markup,[{tagName:"text",className:"type",selector:"type"}],P.prototype.markupZoom),_gateParams:P.prototype._gateParams.concat(["celltype"]),_unsupportedPropChanges:P.prototype._unsupportedPropChanges.concat(["celltype"])}),gi=N.extend({attrs:h.merge({},N.prototype.attrs,{warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}}),_autoResizeBox:!0,presentationAttributes:N.addPresentationAttributes({warning:"WARNING"}),confirmUpdate(t){N.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"WARNING")&&this._updateWarning()},_updateWarning(){const t=this.model.get("warning"),e=this.attrs.warning[t?"warn":"none"];this._applyAttrs(e)},update(){N.prototype.update.apply(this,arguments),this._updateWarning()},events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"zoomInCircuit"},zoomInCircuit(t){return t.stopPropagation(),this.paper.trigger("open:subcircuit",this.model),!1}}),mi=k.define("GenMux",{bits:{in:1,sel:1},size:{width:40,height:void 0},ports:{groups:{in2:{position:{name:"top",args:{y:5}},attrs:h.merge({},x,{wire:{x2:0,y2:-25},port:{magnet:"passive",refY:-25},bits:{refDx:-5,refDy:2,textAnchor:"start"}}),z:-1}}},attrs:{label:{refDy:8}}},{initialize(){const t=this.get("bits"),e=[{id:"sel",group:"in2",dir:"in",bits:t.sel},{id:"out",group:"out",dir:"out",bits:t.in}],i=this.muxInputs(t.sel);this.get("size").height=16*i.length+8;const o="M"+[[2,0],[5,5],[10,-5]].map((t=>t.join(" "))).join(" L");for(const[s,r]of i.entries()){const i={id:"in"+s,group:"in",dir:"in",bits:t.in,decor:o};r&&(i.portlabel=String(r),i.labelled=!0),e.push(i)}this.get("ports").items=e,k.prototype.initialize.apply(this,arguments);const s=t=>this.attr(["body","points"],[[0,-5],[t.width,5],[t.width,t.height-5],[0,t.height+5]].map((t=>t.join(","))).join(" "));s(this.get("size")),this.on("change:size",((t,e)=>s(e)))},operation(t){const e=this.muxInput(t.sel);return void 0===e?{out:u.Vector3vl.xes(this.get("bits").in)}:{out:t["in"+e]}},getLayoutSize(){const t=this.size();return t.height+=30,t},setLayoutPosition(t){this.set("position",{x:t.x,y:t.y+20})},getPortsPositions(){const t=k.prototype.getPortsPositions.apply(this,arguments),e={};for(const i in t)e[i]={...t[i]},e[i].y=e[i].y+20;return e},markup:k.prototype.markup.concat([{tagName:"polygon",className:"body",selector:"body"}]),_gateParams:k.prototype._gateParams.concat(["bits"]),_unsupportedPropChanges:k.prototype._unsupportedPropChanges.concat(["bits"]),_operationHelpers:k.prototype._operationHelpers.concat(["muxInput"])}),_i=w.extend({initialize(){this.ins=this.model.muxInputs(this.model.get("bits").sel),w.prototype.initialize.apply(this,arguments)},confirmUpdate(t){w.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"SIGNAL")&&this._updateMux(this.model.get("inputSignals"))},render(){w.prototype.render.apply(this,arguments),this._updateMux(this.model.get("inputSignals"))},_updateMux(t){const e=this.model.muxInput(t.sel);for(const t of this.ins.keys())this.$("[port=in"+t+"] path.decor").css("visibility",e==t?"visible":"hidden")}}),fi=mi.define("Mux",{},{muxInputs:t=>Array(1<<t),muxInput:t=>t.isFullyDefined?t.toBigInt().toString():void 0}),bi=_i,yi=mi.define("Mux1Hot",{attrs:{info:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",text:"1Hot",transform:"rotate(90)"}}},{markup:mi.prototype.markup.concat([{tagName:"text",className:"info",selector:"info"}]),muxInputs:t=>Array(t+1),muxInput:t=>{const e=t.toArray();return t.isFullyDefined&&e.filter((t=>1==t)).length<=1?String(e.indexOf(1)+1):void 0}}),xi=_i,ki=mi.define("MuxSparse",{inputs:void 0,default_input:!1},{initialize(){const t=this.get("inputs");for(let e=0;e<t.length;e++)"bigint"!=typeof t[e]&&(t[e]=BigInt(t[e]));mi.prototype.initialize.apply(this,arguments)},muxInputs(t){return this.get("default_input")?["*"].concat(this.get("inputs")):this.get("inputs")},muxInput(t){const e=this.get("default_input");if(!t.isFullyDefined)return;const i=this.get("inputs").indexOf(t.toBigInt());return i<0?e?0:void 0:e?i+1:i},_gateParams:mi.prototype._gateParams.concat(["inputs","default_input"]),_unsupportedPropChanges:mi.prototype._unsupportedPropChanges.concat(["inputs","default_input"])}),wi=_i,vi=P.define("Dff",{bits:1,initial:"x",size:{width:80,height:void 0},ports:{groups:{in:{position:P.prototype._getStackedPosition({side:"left"})},out:{position:P.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const t=this.get("bits"),e=(this.get("initial"),this.get("polarity")||{}),i=[];this.get("no_data")||i.push({id:"in",group:"in",dir:"in",bits:t,portlabel:"D",labelled:!0}),i.push({id:"out",group:"out",dir:"out",bits:t,portlabel:"Q",labelled:!0}),"arst"in e&&!this.get("arst_value")&&this.set("arst_value",Array(t).fill("0").join("")),"srst"in e&&!this.get("srst_value")&&this.set("srst_value",Array(t).fill("0").join(""));let o=1;"aload"in e&&(o+=2,i.push({id:"ain",group:"in",dir:"in",bits:t,portlabel:"AD",labelled:!0}),i.push({id:"aload",group:"in",dir:"in",bits:1,polarity:e.aload,labelled:!0})),"clock"in e&&(o++,i.push({id:"clk",group:"in",dir:"in",bits:1,polarity:e.clock,decor:P.prototype.decorClock,labelled:!0})),"set"in e&&(o++,i.push({id:"set",group:"in",dir:"in",bits:t,polarity:e.set,portlabel:"S",labelled:!0})),"clr"in e&&(o++,i.push({id:"clr",group:"in",dir:"in",bits:t,polarity:e.clr,portlabel:"R",labelled:!0})),"srst"in e&&(o++,i.push({id:"srst",group:"in",dir:"in",bits:1,polarity:e.srst,labelled:!0})),"arst"in e&&(o++,i.push({id:"arst",group:"in",dir:"in",bits:1,polarity:e.arst,labelled:!0})),"enable"in e&&(o++,i.push({id:"en",group:"in",dir:"in",bits:1,polarity:e.enable,labelled:!0})),this.get("size").height=16*o+8,this.get("ports").items=i,this.last_clk=0,P.prototype.initialize.apply(this,arguments)},_resetPortValue(t){return"out"==t.id&&"out"==t.dir?u.Vector3vl.fromBin(this.get("initial"),t.bits):P.prototype._resetPortValue.call(this,t)},operation(t){const e=this.get("polarity"),i=t=>e[t]?1:-1;let o,s,r;const n=t=>({out:s?t.and(r).or(s):t});if("clock"in e&&(o=this.last_clk,this.last_clk=t.clk.get(0)),"arst"in e&&t.arst.get(0)==i("arst"))return{out:u.Vector3vl.fromBin(this.get("arst_value"),this.get("bits"))};if("aload"in e&&t.aload.get(0)==i("aload"))return{out:t.ain};if("set"in e&&(s=e.set?t.set:t.set.not(),r=e.set?t.set.not():t.set),"clr"in e){s=s||u.Vector3vl.zeros(this.get("bits"));const i=e.clr?t.clr.not():t.clr;r=r?i.and(r):i}return"enable"in e&&t.en.get(0)!=i("enable")&&this.get("enable_srst")?n(this.get("outputSignals").out):!("clock"in e)||t.clk.get(0)==i("clock")&&o==-i("clock")?"srst"in e&&t.srst.get(0)==i("srst")?n(u.Vector3vl.fromBin(this.get("srst_value"),this.get("bits"))):"enable"in e&&t.en.get(0)!=i("enable")&&!this.get("enable_srst")||this.get("no_data")?n(this.get("outputSignals").out):n(t.in):n(this.get("outputSignals").out)},_gateParams:P.prototype._gateParams.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"]),_unsupportedPropChanges:P.prototype._unsupportedPropChanges.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"])}),Si=N.extend({_autoResizeBox:!0}),Pi=P.define("Memory",{bits:1,abits:1,rdports:[],wrports:[],words:void 0,offset:0,attrs:{portsplit:{stroke:"black"}},ports:{groups:{in:{position:P.prototype._getStackedPosition({side:"left"})},out:{position:P.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const t=this.get("bits"),e=this.get("abits");this.get("rdports"),this.get("wrports");let i=0,o=0;const s=[],r=[];for(const[n,a]of this._memrdports())s.push({id:n+"addr",group:"in",dir:"in",bits:e,portlabel:"addr",labelled:!0},{id:n+"data",group:"out",dir:"out",bits:t,portlabel:"data",labelled:!0,args:{idxOffset:o}}),i+=1,"srst_polarity"in a&&(i++,o++,s.push({id:n+"srst",group:"in",dir:"in",bits:1,portlabel:"srst",polarity:a.srst_polarity,labelled:!0})),"arst_polarity"in a&&(i++,o++,s.push({id:n+"arst",group:"in",dir:"in",bits:1,portlabel:"arst",polarity:a.arst_polarity,labelled:!0})),"enable_polarity"in a&&(i++,o++,s.push({id:n+"en",group:"in",dir:"in",bits:1,portlabel:"en",polarity:a.enable_polarity,labelled:!0})),"clock_polarity"in a&&(i++,o++,s.push({id:n+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:a.clock_polarity,decor:P.prototype.decorClock,labelled:!0})),r.push(i);for(const[o,n]of this._memwrports())i+=2,s.push({id:o+"data",group:"in",dir:"in",bits:t,portlabel:"data",labelled:!0},{id:o+"addr",group:"in",dir:"in",bits:e,portlabel:"addr",labelled:!0}),"enable_polarity"in n&&(i++,s.push({id:o+"en",group:"in",dir:"in",bits:n.no_bit_enable?1:t,portlabel:"en",polarity:n.enable_polarity,labelled:!0})),"clock_polarity"in n&&(i++,s.push({id:o+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:n.clock_polarity,decor:P.prototype.decorClock,labelled:!0})),r.push(i);r.pop(),this.get("size").height=16*i+8,this.get("ports").items=s,P.prototype.initialize.apply(this,arguments),this.removeProp("memdata"),this.on("change:size",((t,e)=>{const i=[];for(const t of r)i.push([[0,16*t+4],[e.width,16*t+4]].map((t=>t.join(" "))).join(" L "));this.attr("path.portsplit/d","M "+i.join(" M "))}))},_resetPortValue(t){if("out"==t.dir){const e=/^rd([0-9]+)data$/.exec(t.id),i=e?this.get("rdports")[e[1]]:{};if("init_value"in i)return u.Vector3vl.fromBin(i.init_value,t.bits)}return P.prototype._resetPortValue.call(this,t)},prepare(){const t=this.get("bits");var e=this.get("words");const i=this.get("memdata");e||(e=1<<abits,this.prop("words",e,{init:!0})),this.memdata=i?u.Mem3vl.fromJSON(t,i):new u.Mem3vl(t,e),console.assert(this.memdata.words==e),this.last_clk={};for(const[t,e]of this._memports())"clock_polarity"in e&&(this.last_clk[t+"clk"]=0)},operation(t){const e=this.get("bits"),i={},o=(t,e)=>t[e+"_polarity"]?1:-1,s=(e,i)=>!("enable_polarity"in i&&!t[e+"en"].toArray().some((t=>t==o(i,"enable")))),r=(e,i)=>{const s=e+"clk";return!("clock_polarity"in i)||t[s].get(0)==o(i,"clock")&&this.last_clk[s]==-o(i,"clock")},n=t=>t>=0&&t<this.get("words"),a=(o,s)=>{const r=this._calcaddr(t[o+"addr"]);n(r)?i[o+"data"]=this.memdata.get(r):i[o+"data"]=u.Vector3vl.xes(e)},p=(e,i,o,s)=>{if(i.no_bit_enable||!("enable_polarity"in i))return s;const r=i.enable_polarity?t[e+"en"]:t[e+"en"].not();return s.and(r).or(o.and(r.not()))},l=(o,s)=>{a(o);for(const[n,a]of this.get("wrports").entries()){const l="wr"+n,c=(t,e)=>"boolean"==typeof t?t:t[e];"transparent"in s&&c(s.transparent,n)&&r(l,a)&&t[o+"addr"]==t[l+"addr"]&&(i[o+"data"]=p(l,a,i[o+"data"],t[l+"data"])),"collision"in s&&c(s.collision,n)&&r(l,a)&&t[o+"addr"]==t[l+"addr"]&&(i[o+"data"]=p(l,a,i[o+"data"],u.Vector3vl.xes(e)))}},c=(e,i)=>{const o=this._calcaddr(t[e+"addr"]);if(n(o)){const s=this.memdata.get(o),r=p(e,i,s,t[e+"data"]),n=!s.eq(r);this.memdata.set(o,r),n&&this.trigger("memChange",o,r)}},h=(s,r)=>{t[s+"srst"].get(0)==o(r,"srst")&&(i[s+"data"]="srst_value"in r?u.Vector3vl.fromBin(r.srst_value,e):u.Vector3vl.zeros(e))},d=(s,r)=>{t[s+"arst"].get(0)==o(r,"arst")&&(i[s+"data"]="arst_value"in r?u.Vector3vl.fromBin(r.arst_value,e):u.Vector3vl.zeros(e))},g=(e,i)=>{if("clock_polarity"in i){const i=e+"clk";this.last_clk[i]=t[i].get(0)}};for(const[t,e]of this._memrdports())i[t+"data"]=this.get("outputSignals")[t+"data"],"clock_polarity"in e&&s(t,e)&&r(t,e)&&l(t,e);for(const[t,e]of this._memwrports())s(t,e)&&r(t,e)&&c(t,e);for(const[t,e]of this._memrdports())!("clock_polarity"in e)&&s(t,e)&&a(t);for(const[t,e]of this._memrdports())"srst_polarity"in e&&(s(t,e)||!("enable_srst"in e))&&r(t,e)&&h(t,e),"arst_polarity"in e&&d(t,e);for(const[t,e]of this._memrdports())g(t,e);for(const[t,e]of this._memwrports())g(t,e);return i},_calcaddr(t){return t.isFullyDefined?t.toNumber()-this.get("offset"):-1},*_memrdports(){for(const[t,e]of this.get("rdports").entries())yield["rd"+t,e]},*_memwrports(){for(const[t,e]of this.get("wrports").entries())yield["wr"+t,e]},*_memports(){yield*this._memrdports(),yield*this._memwrports()},markup:P.prototype.markup.concat([{tagName:"path",className:"portsplit",selector:"portsplit"}],P.prototype.markupZoom),getGateParams(){const t=P.prototype.getGateParams.apply(this,arguments);return t.memdata=this.memdata.toJSON(),t},_gateParams:P.prototype._gateParams.concat(["bits","abits","rdports","wrports","words","offset"]),_unsupportedPropChanges:P.prototype._unsupportedPropChanges.concat(["bits","abits","rdports","wrports","words","offset"]),_operationHelpers:P.prototype._operationHelpers.concat(["_memrdports","_memwrports","_memports","_calcaddr"])}),Ni=N.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(t){t.stopPropagation();const e=this.model,i=e.graph._display3vl,o=y("<div>",{title:"Memory contents: "+e.get("label")}).appendTo("html > body");o.append(y('<div class="btn-toolbar" role="toolbar"><div class="btn-group mr-2" role="group"><button name="prev" type="button" class="btn btn-secondary" title="Previous page">â†</button><button name="next" type="button" class="btn btn-secondary" title="Next page">â†’</button></div><div class="input-group">'+function(t,e,i){return'<select name="base">'+t.usableDisplays("read",e).map((t=>'<option value="'+t+'"'+("hex"==t?' selected="selected"':"")+">"+t+"</option>")).join("")+"</select>"}(i,e.get("bits"))+'</div></div><table class="memeditor"></table>'));const s=e.get("words"),r=e.memdata,n=Math.ceil(e.get("abits")/4);let a,p=0;const l=()=>o.find("select[name=base]").val(),c=t=>{const e=Math.floor((t-p)/a),i=t-p-e*a;return o.find("table tr:nth-child("+(e+1)+") td:nth-child("+(i+2)+") input")},h=t=>{for(const[i,o]of e._memrdports())c(e._calcaddr(t[i+"addr"])).removeClass("isread");for(const[i,o]of e._memwrports())c(e._calcaddr(t[i+"addr"])).removeClass("iswrite")},u=t=>{for(const[i,o]of e._memrdports())c(e._calcaddr(t[i+"addr"])).addClass("isread");for(const[i,o]of e._memwrports())c(e._calcaddr(t[i+"addr"])).addClass("iswrite")},d=()=>{const t=l();o.find("button[name=prev]").prop("disabled",p<=0),o.find("button[name=next]").prop("disabled",p+8*a>=s);let r=o.find("table tr:first-child");const c=e.memdata;for(let e=0;e<8&&!(p+e*a>=s);e++,r=r.next()){const o=(p+e*a).toString(16);let l=r.find("td:first-child");l.text("0".repeat(n-o.length)+o),l=l.next();for(let o=0;o<a&&!(p+e*a+o>=s);o++,l=l.next())l.find("input").val(i.show(t,c.get(p+e*a+o))).removeClass("invalid")}u(e.get("inputSignals"))},g=()=>{const t=l(),r=i.pattern(t),n=i.size(t,e.get("bits"));a=Math.min(s,16,Math.ceil(32/n)),p=Math.max(0,Math.min(s-8*a,p));const c=o.find("table");c.empty();for(let t=0;t<8&&!(p+t*a>=s);t++){const e=y("<tr>");y("<td>").appendTo(e);for(let i=0;i<a&&!(p+t*a+i>=s);i++){const t=y("<td>");y('<input type="text">').attr("size",n).attr("maxlength",n).attr("pattern",r).appendTo(t),t.appendTo(e)}e.appendTo(c)}d()};g(),o.find("select[name=base]").on("change",g),o.find("button[name=prev]").on("click",(()=>{h(e.get("inputSignals")),p=Math.max(0,p-8*a),d()})),o.find("button[name=next]").on("click",(()=>{h(e.get("inputSignals")),p=Math.min(s-8*a,p+8*a),d()})),o.on("change","input",(t=>{const o=l(),s=y(t.target),n=s.closest("td").index()-1,c=s.closest("tr").index(),h=p+c*a+n,u=e.get("bits");if(i.validate(o,t.target.value,u)){const n=i.read(o,t.target.value,u);r.set(h,n),e.trigger("manualMemChange",e,h,n),s.removeClass("invalid")}else s.addClass("invalid")}));const m=(t,e)=>{if(t<p||t>p+8*a)return;const o=l(),s=c(t).val(i.show(o,r.get(t))).removeClass("invalid").removeClass("flash");setTimeout((()=>{s.addClass("flash")}),10)},_=(t,i)=>{h(e.previous("inputSignals")),u(i)};return e.on("memChange",m),e.on("change:inputSignals",_),this.paper.trigger("open:memorycontent",o,(()=>{o.remove(),e.off("memChange",m),e.off("change:inputSignals",_)})),!1}});var Ci=i(6866),Vi=i(85678),Bi=i(70681),zi=i(28282);const Ai=P.define("FSM",{bits:{in:1,out:1},polarity:{clock:!0},init_state:0,states:1,trans_table:[],size:{width:80,height:56},ports:{groups:{in:{position:P.prototype._getStackedPosition({side:"left"})},out:{position:P.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const t=this.get("bits"),e=this.get("polarity"),i=this.get("init_state"),o=this.get("states");this.get("trans_table"),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in,labelled:!0},{id:"clk",group:"in",dir:"in",bits:1,polarity:e.clock,decor:P.prototype.decorClock,labelled:!0},{id:"arst",group:"in",dir:"in",bits:1,polarity:e.arst,labelled:!0},{id:"out",group:"out",dir:"out",bits:t.out,labelled:!0}],P.prototype.initialize.apply(this,arguments);const s=this.get("current_state");this.fsmgraph=new ui.k;const r=[];for(let t=0;t<o;t++){const e=new n.Cd({stateNo:t,id:"state"+t,isInit:t==i});e.attr("label/text",String(t)),e.resize(100,50),t==i&&e.attr("body/strokeWidth",3),t==s&&e.attr("body/class","current_state"),e.addTo(this.fsmgraph),r.push(e)}for(const[t,e]of this.transitions)for(const i of e){const e=new n.rU({id:i.id,ctrlIn:i.ctrlIn,ctrlOut:i.ctrlOut});e.appendLabel({attrs:{text:{text:e.get("ctrlIn").toBin()+"/"+e.get("ctrlOut").toBin()}}}),e.source({id:"state"+t}),e.target({id:"state"+i.stateOut}),e.addTo(this.fsmgraph)}this.listenTo(this,"change:current_state",((t,e)=>{const i=t.previous("current_state");this.fsmgraph.getCell("state"+i).removeAttr("body/class"),this.fsmgraph.getCell("state"+e).attr("body/class","current_state")})),this.listenTo(this,"change:next_trans",((t,e)=>{const i=t.previous("next_trans");if(i){const t=this.fsmgraph.getCell(i);t.removeAttr("line/class"),t.removeAttr("line/targetMarker/class")}e&&this.fsmgraph.getCell(e).attr({line:{class:"next_trans",targetMarker:{class:"next_trans"}}})}))},prepare(){const t=this.get("bits");this.transitions=new Map;var e=0;for(const i of this.get("trans_table"))this.transitions.has(i.state_in)||this.transitions.set(i.state_in,[]),this.transitions.get(i.state_in).push({id:"tr"+e,stateOut:i.state_out,ctrlIn:u.Vector3vl.fromBin(i.ctrl_in,t.in),ctrlOut:u.Vector3vl.fromBin(i.ctrl_out,t.out)}),e++;var i=this.get("current_state");void 0===i&&(i=this.get("init_state"),this.set("current_state",i)),this.last_clk=0},operation(t){const e=this.get("bits"),i=this.get("polarity"),o=()=>{const e=this.transitions.get(this.get("current_state"))||[];for(const i of e){const e=i.ctrlIn,o=e.xmask();if(t.in.or(o).eq(e.or(o)))return i}},s=t=>i[t]?1:-1;if(t.arst.get(0)==s("arst"))this.set("current_state",this.get("init_state"));else{const e=this.last_clk;if(t.clk.get(0)==s("clock")&&e==-s("clock")){const t=o();this.set("current_state",t?t.stateOut:this.get("init_state"))}}this.last_clk=t.clk.get(0);const r=o();return r?this.set("next_trans",r.id):this.set("next_trans",void 0),{out:(()=>{const i=this.transitions.get(this.get("current_state"))||[],o=t.in.xmask(),s=[];for(const e of i){const i=e.ctrlIn,r=i.xmask().or(o);t.in.or(r).eq(i.or(r))&&s.push(e.ctrlOut)}const r=u.Vector3vl.xes(e.out);if(0==s.length)return r;for(;s.length>1;){const t=s.pop(),e=s[0].xnor(t).or(r);s[0]=s[0].and(e).or(r.and(e.xmask()))}return s[0]})()}},markup:P.prototype.markup.concat(P.prototype.markupZoom),_gateParams:P.prototype._gateParams.concat(["bits","polarity","states","init_state","trans_table"]),_unsupportedPropChanges:P.prototype._unsupportedPropChanges.concat(["bits","polarity","states","init_state","trans_table"]),_presentationParams:P.prototype._presentationParams.concat(["current_state","next_trans"])}),Oi=N.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(t){t.stopPropagation();const e=y("<div>",{title:"FSM: "+this.model.get("label")}).appendTo("html > body"),i=y("<div>").appendTo(e),o=this.model.fsmgraph,s=new Vi.X({el:i,model:o});return o.resetCells(o.getCells()),o.get("laid_out")||(Ci.S.layout(o,{dagre:Bi,graphlib:zi}),o.set("laid_out",!0)),s.listenTo(o,"change:position",(t=>{s.fitToContent({padding:30,allowNewOrigin:"any"})})),s.fitToContent({padding:30,allowNewOrigin:"any"}),this.paper.trigger("open:fsm",e,(()=>{s.remove(),e.remove()})),!1}}),Mi="#03c03c",Ii="#3c3c3c",Gi=B.define("Display7",{bits:8,size:{width:76.5,height:110},attrs:{LEDs:{fill:Ii,transform:"translate(1,1),scale(6)"},a:{points:"1, 1  2, 0  8, 0  9, 1  8, 2  2, 2"},b:{points:"9, 1 10, 2 10, 8  9, 9  8, 8  8, 2"},c:{points:"9, 9 10,10 10,16  9,17  8,16  8,10"},d:{points:"9,17  8,18  2,18  1,17  2,16  8,16"},e:{points:"1,17  0,16  0,10  1, 9  2,10  2,16"},f:{points:"1, 9  0, 8  0, 2  1, 1  2, 2  2, 8"},g:{points:"1, 9  2, 8  8, 8  9, 9  8,10  2,10"},dp:{cx:"11.3",cy:"16.9",r:"1.1"},body:{height:"calc(h)",width:"calc(w)",stroke:"#222222",fill:"#333333"}}},{isOutput:!0,_portDirection:"in",bits:8,getOutput(){return this.get("inputSignals").in},markupBus:C.prototype.markup.concat([{tagName:"rect",selector:"display"},{tagName:"polygon",selector:"a",groupSelector:"LEDs"},{tagName:"polygon",selector:"b",groupSelector:"LEDs"},{tagName:"polygon",selector:"c",groupSelector:"LEDs"},{tagName:"polygon",selector:"d",groupSelector:"LEDs"},{tagName:"polygon",selector:"e",groupSelector:"LEDs"},{tagName:"polygon",selector:"f",groupSelector:"LEDs"},{tagName:"polygon",selector:"g",groupSelector:"LEDs"},{tagName:"circle",selector:"dp",groupSelector:"LEDs"}])}),Li=z.extend({_autoResizeBox:!1,confirmUpdate(t){N.prototype.confirmUpdate.apply(this,arguments),this._updateDisplay()},_updateDisplay(){const t=this.model.getOutput(),e={dp:{fill:1===t.get(7)?Mi:Ii},a:{fill:1===t.get(6)?Mi:Ii},b:{fill:1===t.get(5)?Mi:Ii},c:{fill:1===t.get(4)?Mi:Ii},d:{fill:1===t.get(3)?Mi:Ii},e:{fill:1===t.get(2)?Mi:Ii},f:{fill:1===t.get(1)?Mi:Ii},g:{fill:1===t.get(0)?Mi:Ii}};this._applyAttrs(e)}});var Ti=i(21187);const Ei=new Set(["Subcircuit","Input","Output","Button","Lamp","NumEntry","NumDisplay"]);class Di{constructor(t,e){this.source=t,this.target=e}}class ji{constructor(t,e,i,s,r,n){this.id=t,this.graph=e,this.special=Ei.has(i.type),this.isSubcircuit="Subcircuit"==i.type,this.isOutput="Output"==i.type;const a=o[i.type].prototype;this.operation=a.operation;for(const t of a._operationHelpers)this[t]=a[t];this.links=new Set,this._links_to=Object.create(null),this._params=i,this._params.inputSignals=Object.create(null),this._params.outputSignals=Object.create(null),this._presentationParams=a._presentationParams,this._presentationParamChanged=Object.create(null),this._monitors=Object.create(null),this._ports=Object.create(null);for(const t of s)this._ports[t.id]=t,this._monitors[t.id]=new Set,"in"==t.dir&&(this._params.inputSignals[t.id]=u.Vector3vl.fromClonable(r[t.id])),"out"==t.dir&&(this._params.outputSignals[t.id]=u.Vector3vl.fromClonable(n[t.id]),this._links_to[t.id]=new Set);a.prepare.call(this)}get(t){return this._params[t]}set(t,e){this._params[t]=e,this._presentationParams.includes(t)&&Ui._markPresentationParam(this,t)}addLinkTo(t,e){this._links_to[t].add(e)}removeLinkTo(t,e){this._links_to[t].delete(e)}addLink(t){this.links.add(t)}removeLink(t){this.links.delete(t)}targets(t){return this._links_to[t]}getPort(t){return this._ports[t]}getPorts(){return Object.values(this._ports)}trigger(t,...e){postMessage({type:"gateTrigger",args:[this.graph.id,this.id,t,e]})}monitor(t,e){this._monitors[t].add(e)}unmonitor(t,e){this._monitors[t].delete(Number(e))}getMonitors(t){return this._monitors[t]}}class Ri{constructor(t){this.id=t,this._gates={},this._links={},this._observed=!1,this._subcircuit=null}addLink(t,e,i){this._links[t]=new Di(e,i),this._gates[e.id].addLinkTo(e.port,i),this._gates[e.id].addLink(t),this._gates[i.id].addLink(t)}addGate(t,e,i,o,s){this._gates[t]=new ji(t,this,e,i,o,s)}removeLink(t){const e=this._links[t];this._gates[e.source.id].removeLinkTo(e.source.port,e.target),this._gates[e.source.id].removeLink(t),this._gates[e.target.id].removeLink(t),delete this._links[t]}removeGate(t){for(const e of this._gates[t].links)this.removeLink(e);this._gates[t].graph=null,delete this._gates[t]}getGate(t){return this._gates[t]}getLink(t){return this._links[t]}getGates(){return Object.values(this._gates)}observe(){this._observed=!0}unobserve(){this._observed=!1}get observed(){return this._observed}setSubcircuit(t){this._subcircuit=t}get subcircuit(){return this._subcircuit}}const Ui=new class{constructor(){this._interval=10,this._graphs=Object.create(null),this._monitors=Object.create(null),this._monitorChecks=Object.create(null),this._alarms=Object.create(null),this._alarmQueue=new Map,this._queue=new Map,this._pq=new Ti,this._toUpdate=new Map,this._toUpdateParam=new Map,this._tick=0,this._sender=setInterval((()=>{this._sendUpdates()}),25),this._updater=null}interval(t){this._interval=t}updateGates(t,e){const i=this._updateGates();e&&this._sendUpdates(),this._postMonitors(),this._sendAck(t,i)}_updateGates(){if(this._pq.peek()==this._tick)return this._updateGatesNext();{const t=0|this._tick;return this._tick=t+1|0,0}}updateGatesNext(t,e){const i=this._updateGatesNext();e&&this._sendUpdates(),this._postMonitors(),this._sendAck(t,i)}_updateGatesNext(){const t=0|this._pq.poll();console.assert(t>=this._tick),this._tick=t;const e=this._queue.get(t);let i=0;for(;e.size;){const[t,o]=e.entries().next().value;if(e.delete(t),t.special)continue;if(!t.graph)continue;const s=t.operation(o);"_clock_hack"in s&&(delete s._clock_hack,this._enqueue(t)),this._setGateOutputSignals(t,s),i++}return this._queue.delete(t),this._tick=t+1|0,i}ping(t,e){e&&this._sendUpdates(),this._sendAck(t)}start(){this._stop(),this._updater=setInterval((()=>{this._updateGates(),this._postMonitors()}),this._interval)}startFast(){this._stop(),this._updater=setInterval((()=>{const t=Date.now();for(;Date.now()-t<10&&this._hasPendingEvents()&&this._updater;)this._updateGatesNext(),this._postMonitors()}),10)}stop(t,e){this._stop(),e&&this._sendUpdates(),this._sendAck(t)}_stop(){this._updater&&(clearInterval(this._updater),this._updater=null)}addGraph(t){console.assert(!(t in this._graphs)),this._graphs[t]=new Ri(t)}addLink(t,e,i,o){const s=this._graphs[t];s.addLink(e,i,o);const r=s.getGate(i.id),n=s.getGate(o.id),a=r.get("outputSignals")[i.port];this._setGateInputSignal(n,o.port,a)}addGate(t,e,i,o,s,r){const n=this._graphs[t];n.addGate(e,i,o,s,r),this._enqueue(n.getGate(e))}addSubcircuit(t,e,i,o){const s=this._graphs[t].getGate(e),r=this._graphs[i];s.set("subgraph",r),s.set("circuitIOmap",o),r.setSubcircuit(s);for(const[t,e]of Object.entries(o)){const i=r.getGate(e);"in"==s.getPort(t).dir&&this._setGateOutputSignal(i,"out",s.get("inputSignals")[t]),"out"==s.getPort(t).dir&&this._setGateOutputSignal(s,t,i.get("inputSignals").in)}}removeLink(t,e){const i=this._graphs[t],o=i.getLink(e);i.removeLink(e);const s=i.getGate(o.target.id),r=u.Vector3vl.xes(s.getPort(o.target.port).bits);this._setGateInputSignal(s,o.target.port,r)}removeGate(t,e){this._graphs[t].removeGate(e)}observeGraph(t){const e=this._graphs[t];e.observe();for(const t of e.getGates())for(const e of t.getPorts())"out"==e.dir&&this._markUpdate(t,e.id)}unobserveGraph(t){this._graphs[t].unobserve()}changeInput(t,e,i){const o=this._graphs[t].getGate(e);this._setGateOutputSignals(o,{out:u.Vector3vl.fromClonable(i)})}changeParam(t,e,i,o){this._graphs[t].getGate(e).set(i,o)}manualMemChange(t,e,i,o){const s=this._graphs[t].getGate(e);s.memdata.set(i,u.Vector3vl.fromClonable(o)),this._enqueue(s)}monitor(t,e,i,o,{triggerValues:s,stopOnTrigger:r,oneShot:n,synchronous:a}){if(null!=s)for(const t of s.keys())s[t]=u.Vector3vl.fromClonable(s[t]);const p=this._graphs[t].getGate(e);this._monitors[o]={gate:p,port:i,triggerValues:s,stopOnTrigger:r,oneShot:n,synchronous:a},p.monitor(i,o),null==s&&postMessage({type:"monitorValue",args:[o,this._tick,p.get("outputSignals")[i]]})}unmonitor(t){const e=this._monitors[t];null!=e&&(e.gate.unmonitor(e.port,t),delete this._monitors[t],delete this._monitorChecks[t])}alarm(t,e,{stopOnAlarm:i,synchronous:o}){t<=this._tick||(this._alarms[e]={tick:t,stopOnAlarm:i,synchronous:o},this._alarmQueue.has(t)||this._alarmQueue.set(t,new Set),this._alarmQueue.get(t).add(e),this._pq.add(t-1),this._queue.has(t-1)||this._queue.set(t-1,new Map))}unalarm(t){const e=this._alarms[t];if(null==e)return;const i=e.tick;this._alarmQueue.get(i).delete(t),0==this._alarmQueue.get(i).size&&this._alarmQueue.delete(i),delete this._alarms[t]}_enqueue(t){const e=this._tick+t.get("propagation")|0;(()=>{const t=this._queue.get(e);if(void 0!==t)return t;const i=new Map;return this._queue.set(e,i),this._pq.add(e),i})().set(t,Object.assign({},t.get("inputSignals")))}_postMonitors(){for(const[t,e]of Object.entries(this._monitorChecks)){const{triggerValues:i,stopOnTrigger:o,oneShot:s,synchronous:r}=this._monitors[t];let n=!0;i&&(n=i.some((t=>e.eq(t)))),n&&(s&&this.unmonitor(t),r&&this._sendUpdates(),postMessage({type:"monitorValue",args:[t,this._tick,e,o,s]}),o&&this._stop())}if(this._monitorChecks=Object.create(null),this._alarmQueue.get(this._tick)){for(const t of this._alarmQueue.get(this._tick)){const{stopOnAlarm:e,synchronous:i}=this._alarms[t];i&&this._sendUpdates(),delete this._alarms[t],postMessage({type:"alarmReached",args:[t,this._tick,e]}),e&&this._stop()}this._alarmQueue.delete(this._tick)}}_setGateOutputSignals(t,e){for(const[i,o]of Object.entries(e))this._setGateOutputSignal(t,i,o)}_setGateOutputSignal(t,e,i){const o=t.get("outputSignals"),s=o[e];if(i.eq(s))return;o[e]=i,this._markUpdate(t,e);for(const o of t.targets(e)){const e=t.graph.getGate(o.id);this._setGateInputSignal(e,o.port,i)}const r=t.getMonitors(e);for(const t of r)this._monitorChecks[t]=i}_setGateInputSignal(t,e,i){const o=t.get("inputSignals"),s=o[e];if(!i.eq(s))if(o[e]=i,t.isSubcircuit){const o=t.get("subgraph");if(!o)return;const s=t.get("circuitIOmap"),r=o.getGate(s[e]);if(!r)return;this._setGateOutputSignals(r,{out:i})}else if(t.isOutput){const e=t.graph.subcircuit;if(!e)return;const o=t.get("net");this._setGateOutputSignal(e,o,i)}else this._enqueue(t)}_markUpdate(t,e){t.graph.observed&&(()=>{const e=this._toUpdate.get(t);if(void 0!==e)return e;const i=new Set;return this._toUpdate.set(t,i),i})().add(e)}_markPresentationParam(t,e){t.graph.observed&&(()=>{const e=this._toUpdateParam.get(t);if(void 0!==e)return e;const i=new Set;return this._toUpdateParam.set(t,i),i})().add(e)}_sendUpdates(){const t=[];for(const[e,i]of this._toUpdate){const o=e.get("outputSignals"),s={};for(const t of i)s[t]=o[t];t.push([e.graph.id,e.id,s])}this._toUpdate=new Map;const e=this._hasPendingEvents();if(postMessage({type:"update",args:[this._tick,e,t]}),this._toUpdateParam.size>0){for(const[t,e]of this._toUpdateParam)for(const i of e)postMessage({type:"gateSet",args:[t.graph.id,t.id,i,t.get(i)]});this._toUpdateParam=new Map}}_sendAck(t,e){postMessage({type:"ack",args:[t,e]})}_hasPendingEvents(){return this._queue.size>0}};self.onmessage=t=>{const e=t.data;"arg"in e?Ui[e.type](e.arg):"args"in e?Ui[e.type].apply(Ui,e.args):Ui[e.type]()}}},o={};function s(t){var e=o[t];if(void 0!==e)return e.exports;var r=o[t]={id:t,loaded:!1,exports:{}};return i[t].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}return s.m=i,s.x=()=>{var t=s.O(void 0,[357],(()=>s(15863)));return s.O(t)},t=[],s.O=(e,i,o,r)=>{if(!i){var n=1/0;for(c=0;c<t.length;c++){for(var[i,o,r]=t[c],a=!0,p=0;p<i.length;p++)(!1&r||n>=r)&&Object.keys(s.O).every((t=>s.O[t](i[p])))?i.splice(p--,1):(a=!1,r<n&&(n=r));if(a){t.splice(c--,1);var l=o();void 0!==l&&(e=l)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[i,o,r]},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.f={},s.e=t=>Promise.all(Object.keys(s.f).reduce(((e,i)=>(s.f[i](t,e),e)),[])),s.u=t=>t+".main.js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t})(),(()=>{var t={863:1};s.f.i=(e,i)=>{t[e]||importScripts(s.p+s.u(e))};var e=this.webpackChunkdigitaljs=this.webpackChunkdigitaljs||[],i=e.push.bind(e);e.push=e=>{var[o,r,n]=e;for(var a in r)s.o(r,a)&&(s.m[a]=r[a]);for(n&&n(s);o.length;)t[o.pop()]=1;i(e)}})(),e=s.x,s.x=()=>s.e(357).then(e),s.x()})()}));
//# sourceMappingURL=863.main.js.map